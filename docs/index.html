<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>chenjunfu2-nbt-cpp: chenjunfu2-nbt-cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">chenjunfu2-nbt-cpp<span id="projectnumber">&#160;v1.0.1</span>
   </div>
   <div id="projectbrief">一个基于CPP20的NBT(Named Binary Tag)库</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','搜索',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">chenjunfu2-nbt-cpp </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doxygen__resource_2ROOT"></a></p>
<p><a href="https://github.com/chenjunfu2/NBT_CPP/">开源库链接(Github)</a> <br  />
 <b>最新版本上线vcpkg可能存在延迟，如果需要最新内容，请通过git仓库内的include文件夹安装</b></p>
<p><b>使用vcpkg安装：</b> <br  />
 </p><div class="fragment"><div class="line">vcpkg install chenjunfu2-nbt-cpp[zlib,xxhash]</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md1"></a>
使用方式</h1>
<p>一般情况下，直接使用"#include&lt;<a class="el" href="NBT__All_8hpp.html" title="包含所有可选独立模块">nbt_cpp/NBT_All.hpp</a>&gt;"即可包含所有有头文件 <br  />
 具体使用示例请参见项目根目录下的"usage"文件夹内的项目 <br  />
</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md2"></a>
注意事项</h1>
<p>本库仅头文件，无源文件 <br  />
 本库仅针对nbt对象处理与nbt二进制文件处理，不涉及snbt转换与处理，不提供snbt相关功能 <br  />
 本库仅单线程，请不要多线程同时访问同一个NBT对象，需要多线程请加锁，或每个线程访问独立的NBT对象 <br  />
</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md3"></a>
可选依赖</h1>
<ul>
<li>xxhash（解锁NBT_Helper中的Hash功能）</li>
<li>zlib（解锁NBT_IO中的压缩解压相关功能）</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md4"></a>
可选依赖激活方式</h2>
<p><b>如果你是通过vcpkg安装的，会自动激活依赖，请直接忽略下面内容，同时也请不要编辑vcpkg_config.h</b> <br  />
</p>
<p><b>如果你不是通过vcpkg安装的，那么在头文件vcpkg_config.h中：</b> <br  />
</p>
<p>配置zlib：安装zlib库则存在下面内容，否则注释下面定义 <br  />
 </p><div class="fragment"><div class="line"><span class="comment">//use zlib</span></div>
<div class="line"><span class="preprocessor">#define CJF2_NBT_CPP_USE_ZLIB</span></div>
</div><!-- fragment --><p> 配置xxhash：安装xxhash库则存在下面内容，否则注释下面定义 <br  />
 </p><div class="fragment"><div class="line"><span class="comment">//use xxhash</span></div>
<div class="line"><span class="preprocessor">#define CJF2_NBT_CPP_USE_XXHASH</span></div>
</div><!-- fragment --><p><b>在文件 <a class="el" href="vcpkg__config_8h.html" title="根据已安装的可选依赖提供定义">vcpkg_config.h</a> 也有相关说明</b></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md5"></a>
库内容主要内容介绍</h1>
<p>正常情况下，所有单独的可用模块都只在NBT_All.hpp中包含， <br  />
 你只需要include这一个头文件，即可使用全部NBT库的功能。 <br  />
 如果你需要单独的模块而非要求全部模块，可以在NBT_All.hpp中查找。 <br  />
</p>
<p>任何时候，其它的头文件都有可能存在额外的依赖或互相依赖， <br  />
 比如NBT_Node.hpp中就包含了其它的NBT_xxx类型，而这些类型又和NBT_Node存在相互依赖。 <br  />
 同时，你不应该去包含那些不在NBT_All.hpp中的头文件，除非你知道你在干什么。 <br  />
 比如其它的NBT_xxx类型在看到NBT_Node之前只存在前向声明，包含它们则会导致问题。 <br  />
 又或者NBT_Hash.hpp仅在安装xxhash库后才可用，未安装情况下直接包含则会带来错误。 <br  />
 你应当在包含NBT_All.hpp中的某个模块后，使用它带来的额外依赖，而不是自己去单独包含和使用其它头文件。 <br  />
</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md6"></a>
包含关系图</h1>
<p><img src="IncludeDependencyGraph.png" alt="" class="inline" title="包含关系图"/>    </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md7"></a>
库主要头文件依赖关系</h1>
<p>下面的说明，解释了NBT_All.hpp中的头文件的部分额外依赖关系，以便更好的使用此库。 <br  />
</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md8"></a>
NBT_Node.hpp</h3>
<ul>
<li><a class="el" href="NBT__TAG_8hpp.html" title="NBT类型枚举与它的运算重载">NBT_TAG.hpp</a></li>
<li><a class="el" href="NBT__Type_8hpp.html" title="NBT所有类型定义与类型处理工具集">NBT_Type.hpp</a></li>
<li><a class="el" href="NBT__Array_8hpp.html" title="NBT数组基础类型">NBT_Array.hpp</a></li>
<li><a class="el" href="NBT__String_8hpp.html" title="NBT字符串类型">NBT_String.hpp</a></li>
<li><a class="el" href="NBT__List_8hpp.html" title="NBT列表类型">NBT_List.hpp</a></li>
<li><a class="el" href="NBT__Compound_8hpp.html" title="NBT集合基础类型">NBT_Compound.hpp</a></li>
</ul>
<p>这个头文件基本上包含了所有可用的NBT类型，只要包含此头文件，即可使用所有的NBT类型。 同时也包含了所有NBT类型对应的Tag（也就是enum），Tag与类型可以在编译期互相转化。 具体的类型都在NBT_Type.hpp中定义，其它的类型则是未实例化的模板形式，请不要直接使用它们。 因为这些类型需要和NBT_Node互相引用，所以在看到NBT_Node类型前，它们不应被实例化。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md9"></a>
NBT_Node_View.hpp</h3>
<ul>
<li><a class="el" href="NBT__Node_8hpp.html" title="NBT节点类型，支持存储所有NBT类型的变体">NBT_Node.hpp</a></li>
</ul>
<p>这个头文件仅包含NBT_Node.hpp，类似于std::string_view与std::string的关系， 它只是NBT_Node类型的View，不持有对象，仅为对象的视图，方便在一些不需要持有对象， 但是需要处理任意NBT_Node类型访问的地方使用，比如NBT_Helper中，可以处理任意对象， 但是为了处理任意对象，导致需要把当前对象拿去构造一个临时的NBT_Node（不论是拷贝还是移动）， 都太不优雅，这时候直接构造为NBT_Node_View就能以虚拟的NBT_Node（接口基本一致）形式访问。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md10"></a>
NBT_Helper.hpp</h3>
<ul>
<li><a class="el" href="NBT__Print_8hpp.html" title="用于处理NBT信息打印的默认实现">NBT_Print.hpp</a></li>
<li><a class="el" href="NBT__Node_8hpp.html" title="NBT节点类型，支持存储所有NBT类型的变体">NBT_Node.hpp</a></li>
<li><a class="el" href="NBT__Node__View_8hpp.html" title="NBT节点类型的视图，支持指向所有NBT类型的变体视图，不持有对象">NBT_Node_View.hpp</a></li>
<li><a class="el" href="NBT__Hash_8hpp.html" title="哈希工具集">NBT_Hash.hpp</a> （仅在安装xxhash库的情况下）</li>
</ul>
<p>这个头文件基本上是处理nbt对象打印、序列化、哈希的帮助函数， 不使用重载而是单独提供的原因是，cpp不方便去包装任何builtin类型并给这些类型提供各种重载， 反而是给访问做到一起才更方便。而在MC中因为用的是Java，本身提供builtin类型的包装器， 所以使用重载更为方便，此为设计模式的差异。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md11"></a>
NBT_Reader.hpp 与 NBT_Writer.hpp</h3>
<ul>
<li><a class="el" href="NBT__Print_8hpp.html" title="用于处理NBT信息打印的默认实现">NBT_Print.hpp</a></li>
<li><a class="el" href="NBT__Node_8hpp.html" title="NBT节点类型，支持存储所有NBT类型的变体">NBT_Node.hpp</a></li>
<li><a class="el" href="NBT__Endian_8hpp.html" title="端序工具集">NBT_Endian.hpp</a></li>
</ul>
<p>这两个头文件包含了NBT_Print（打印功能的默认实现，可被替换）， 同时也包含了NBT_Node，因为它们必须看见所有类型才能知道怎么读写， 最后包含了NBT_Endian，以使得不同平台能处理大小端转换， 它们基本上做的内容是差不多的，所以包含的模块也一致， 一个是从字节流中读取到NBT类型，另一个是从NBT类型中写出到字节流， 有点像std::ifstream和std::ofstream的功能。</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md12"></a>
NBT_IO.hpp</h3>
<ul>
<li><a class="el" href="NBT__Print_8hpp.html" title="用于处理NBT信息打印的默认实现">NBT_Print.hpp</a></li>
</ul>
<p>这个头文件基本上是完成从文件中读写NBT字节流与压缩解压功能的， 是否提供压缩解压功能取决于是否安装zlib库。 基本上不存在额外的NBT库依赖，它只处理文件与字节流。</p>
<h4 class="doxsection"><a class="anchor" id="autotoc_md13"></a>
以上内容为各主要模块的说明，具体用法可以参考项目里的usage</h4>
<p>一般情况下的处理流程是这样的（这里省略报错处理流程且默认你安装了zlib库）：</p>
<ol type="1">
<li>使用NBT_IO从NBT文件中读取数据到数据流</li>
<li>使用NBT_IO尝试解压数据流，因为可能存在未经压缩的NBT数据，所以解压失败则直接使用数据，否则使用解压过的数据（兼容性）</li>
<li>使用NBT_Reader通过已经解压的数据或可能未经压缩的数据中读取</li>
<li>通过读取出来的容器处理NBT数据，这里不做具体说明</li>
<li>使用NBT_Writer在完成处理后写出NBT数据到数据流</li>
<li>使用NBT_IO压缩数据流，一般情况下都要求要压缩，也可根据之前的解压成功与否选择是否保留未压缩文件状态</li>
<li>使用NBT_IO从压缩或未经压缩的数据流写出到文件 </li>
</ol>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
